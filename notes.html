<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Notes</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>üìö Notes</h1>
</header>

<div class="container">

  <input
    id="search"
    placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞–º..."
    autocomplete="off"
  >
  <a href="index.html" style="
  display:inline-block;
  margin-bottom:20px;
  text-decoration:none;
  color:#2563eb;
  font-weight:500;
">
  ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é
</a>


  <div id="notes"></div>

</div>

<script>
let allNotes = [];

fetch('notes.json')
  .then(r => {
    if (!r.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å notes.json');
    return r.json();
  })
  .then(data => {
    allNotes = data;
    renderNotes(data);
  })
  .catch(err => {
    // –ò–°–ü–†–ê–í–õ–ï–ù–û: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–∞–≤—ã—á–∫–∞—Ö
    document.getElementById('notes').innerHTML =
      '<p style="color:red">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤</p>';
    console.error(err);
  });

function renderNotes(data) {
  const container = document.getElementById('notes');
  container.innerHTML = '';

  let empty = true;

  for (const section in data) {
    if (!data[section].length) continue;

    empty = false;

    const sectionEl = document.createElement('div');
    sectionEl.className = 'section';

    // –ò–°–ü–†–ê–í–õ–ï–ù–û: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –ª–∏—Ç–µ—Ä–∞–ª–∞ (–æ–±—Ä–∞—Ç–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏)
    sectionEl.innerHTML = <h2>${section}</h2>;

    data[section].forEach(note => {
      const card = document.createElement('div');
      card.className = 'note';

      // –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
      card.innerHTML = `
        <div>
          <a href="${note.file}">
            üìÑ ${note.title}
          </a>
          <br>
          <a href="${note.file}" download style="font-size:14px;">
            ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å
          </a>
        </div>
      `;

      sectionEl.appendChild(card);
    });

    container.appendChild(sectionEl);
  }

  if (empty) {
    container.innerHTML = '<p>–ö–æ–Ω—Å–ø–µ–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
  }
}

document.getElementById('search').addEventListener('input', e => {
  const q = e.target.value.toLowerCase();
  const filtered = {};

  for (const section in allNotes) {
    filtered[section] = allNotes[section].filter(note =>
      note.title.toLowerCase().includes(q)
    );
  }

  // –ò–°–ü–†–ê–í–õ–ï–ù–û: —É–¥–∞–ª–µ–Ω –Ω–µ–≤–µ—Ä–Ω–æ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
  renderNotes(filtered);
});
</script>
<div style="margin:40px 0; padding:20px; background:#fff; border-radius:12px;">
  <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç</h3>
  <p>
    –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç:
    <br>1. –°–∫–æ–ø–∏—Ä—É–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É <b>notes/–ø—Ä–µ–¥–º–µ—Ç/</b>
    <br>2. –î–æ–±–∞–≤—å –∑–∞–ø–∏—Å—å –≤ <b>notes.json</b>
    <br>3. –°–¥–µ–ª–∞–π Commit ‚Üí Push
  </p>
</div>

</body>
</html>
