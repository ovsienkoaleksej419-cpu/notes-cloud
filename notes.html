<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Notes</title>
  <link rel="stylesheet" href="style.css"> 
  
  <style>
    /* * CSS –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ –∫ —Å—Ç–∏–ª—é "–∫–∞—Ä—Ç–æ—á–µ–∫" 
    * (–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ç–∞–∫–∏–µ –∫–∞–∫ --card-bg, --accent, --muted, 
    * –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ style.css)
    */

    /* –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ (–ü—Ä–µ–¥–º–µ—Ç—ã) —Å—Ç–∏–ª–∏–∑—É—é—Ç—Å—è –∫–∞–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .section {
      background: var(--card-bg); 
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 20px;
      box-shadow: var(--shadow, 0 1px 3px rgba(0,0,0,0.1)); /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Ç–µ–Ω–∏, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å */
    }

    /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ */
    .section h2 {
      margin-top: 0;
      color: var(--text-color); 
      font-size: 1.5em;
      /* –£–±–∏—Ä–∞–µ–º –Ω–∏–∂–Ω—é—é –ª–∏–Ω–∏—é, —á—Ç–æ–±—ã –ª—É—á—à–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ç–∏–ª—é –∫–∞—Ä—Ç–æ—á–µ–∫ "–ü—Ä–æ–µ–∫—Ç—ã" */
      border-bottom: none; 
      padding-bottom: 0;
      margin-bottom: 15px;
    }

    /* –°—Ç–∏–ª—å –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞ */
    .note {
      padding: 8px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      /* –î–æ–±–∞–≤–ª—è–µ–º –ª–µ–≥–∫—É—é –≥—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ–±—ã –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç—ã, –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–µ—Ç–∫–∏ */
      border-bottom: 1px dashed var(--border-color, #eee); 
    }
    .note:last-child {
        border-bottom: none; /* –£–±–∏—Ä–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—É —É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ */
    }

    /* –°—Ç–∏–ª—å –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω—Å–ø–µ–∫—Ç */
    .note a:first-child {
      color: var(--text-color); 
      text-decoration: none;
      font-weight: 500;
      flex-grow: 1; 
      padding: 5px 0;
    }

    .note a:first-child:hover {
      color: var(--accent); /* –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }

    /* –°—Ç–∏–ª—å –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ */
    .download-link {
      font-size: 0.9em;
      color: var(--muted); /* –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–≤–µ—Ç --muted, –∫–∞–∫ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π */
      text-decoration: none;
      padding-left: 15px;
      flex-shrink: 0; 
    }

    .download-link:hover {
      color: var(--accent);
    }

    /* –°—Ç–∏–ª—å –¥–ª—è –ø–æ–ª—è –ø–æ–∏—Å–∫–∞, —á—Ç–æ–±—ã –æ–Ω–æ –≤—ã–≥–ª—è–¥–µ–ª–æ –∫–∞–∫ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω–ø—É—Ç */
    #search {
      width: 100%;
      padding: 12px 15px;
      margin-bottom: 15px; /* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø –¥–ª—è –ª—É—á—à–µ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ */
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-size: 1em;
      background: var(--input-bg, #f4f4f5); 
      color: var(--text-color);
      box-sizing: border-box;
    }
    
    /* –°—Å—ã–ª–∫–∞ "–ù–∞ –≥–ª–∞–≤–Ω—É—é" */
    .back-link {
        display: inline-block;
        text-decoration: none;
        color: var(--accent); /* –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç */
        font-weight: 700; 
        margin-top: 5px; /* –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –æ—Ç –ø–æ–∏—Å–∫–∞ */
    }
  </style>
</head>
<body>

<div class="container"> 

  <header class="card" style="margin-top:20px; margin-bottom: 20px; padding: 15px 20px;">
    <h1>üìö –ö–æ–Ω—Å–ø–µ–∫—Ç—ã</h1>
  </header>

  <section class="card" style="margin-bottom: 20px;">
    <input
      id="search"
      placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞–º..."
      autocomplete="off"
    >
    
    <a href="index.html" class="back-link">
      ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é
    </a>
  </section>

  <div id="notes"></div>

</div>

<footer>
  <div class="container">
    ¬© <span id="year"></span> –û–≤—Å–∏–µ–Ω–∫–æ –ê–ª–µ–∫—Å–µ–π
  </div>
</footer>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

let allNotes = [];

fetch('notes.json')
  .then(r => {
    if (!r.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å notes.json');
    return r.json();
  })
  .then(data => {
    allNotes = data;
    renderNotes(data);
  })
  .catch(err => {
    document.getElementById('notes').innerHTML =
      '<p class="card" style="padding: 20px; text-align: center; color: var(--accent);">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª notes.json.</p>';
    console.error(err);
  });

function renderNotes(data) {
  const container = document.getElementById('notes');
  container.innerHTML = '';

  let empty = true;

  for (const section in data) {
    if (!data[section] || !data[section].length) continue;

    empty = false;

    const sectionEl = document.createElement('div');
// –ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–æ–π
    sectionEl.className = 'section'; 

    sectionEl.innerHTML = <h2>${section}</h2>;

    data[section].forEach(note => {
      const noteWrapper = document.createElement('div');
      // –ö–ª–∞—Å—Å 'note' –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞
      noteWrapper.className = 'note'; 

      // –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞ —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Å—ã–ª–∫–æ–π –∏ —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
      noteWrapper.innerHTML = `
        <a href="${note.file}">
          üìÑ ${note.title}
        </a>
        <a href="${note.file}" download class="download-link">
          ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å
        </a>
      `;

      sectionEl.appendChild(noteWrapper);
    });

    container.appendChild(sectionEl);
  }

  if (empty) {
    container.innerHTML = '<p class="card" style="padding: 20px; text-align: center; color: var(--muted);">–ö–æ–Ω—Å–ø–µ–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É.</p>';
  }
}

document.getElementById('search').addEventListener('input', e => {
  const q = e.target.value.toLowerCase();
  const filtered = {};

  for (const section in allNotes) {
    filtered[section] = allNotes[section].filter(note =>
      note.title.toLowerCase().includes(q)
    );
  }

  renderNotes(filtered);
});
</script>
</body>
</html>
